<!-- templates/includes/assessment/answer_card.html -->
{% set question = frappe.get_doc("Question", answer.question) %}
{% set option = frappe.get_doc("Question Option", answer.selected_option) %}
{% set status_colors = {1: 'green', 2: 'yellow', 3: 'orange', 4: 'red'} %}
{% set status_color = status_colors.get(option.rank, 'gray') %}
{% set color_classes = {
    'green': 'bg-cptcard text-green-800 border-green-400',
    'yellow': 'bg-cptcard text-yellow-800 border-yellow-400',
    'orange': 'bg-cptcard text-orange-800 border-orange-400',
    'red': 'bg-cptcard text-red-800 border-red-400'
} %}
{% set badge_text = {
    1: 'L4',
    2: 'L3',
    3: 'L2',
    4: 'L1'
} %}

<div class="suggestion-card rounded-lg shadow-sm mb-6 p-6 border-l-4 {{ color_classes[status_color] }}">
    <div class="flex items-start">
        <div class="status-badge mr-4 {{ color_classes[status_color].replace('border-l-4', '') }}">
            {{ badge_text.get(option.rank, 'Status') }}
        </div>
        <div>
            <p class="text-cptmuted text-sm mb-1">Question</p>
            <h3 class="text-xl font-semibold text-cptheading mb-3">
                {{ question.question_text }}
            </h3>
            <p class="text-cptmuted">
                {{ option.option_text }}
            </p>
            <a href="{{option.suggestion_link}}" class="inline-block mt-4 text-cptaccent font-medium hover:text-cptinfo">
                Tips to improve - {{option.suggestion_text}} â†’
            </a>
        </div>
    </div>
</div>